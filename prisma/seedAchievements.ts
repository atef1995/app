import { PrismaClient } from "@prisma/client";
import { exerciseAchievements } from "./seedExerciseAchievements";

const prisma = new PrismaClient();

const achievements = [
  // First Steps
  {
    key: "FIRST_TUTORIAL",
    title: "Welcome Explorer ðŸ“š",
    description: "Start your first tutorial",
    icon: "ðŸ“š",
    category: "learning",
    rarity: "COMMON",
    points: 5,
    requirementType: "tutorial_start",
    requirementValue: 1,
    isHidden: false,
  },
  {
    key: "FIRST_QUIZ",
    title: "First Steps ðŸŽ¯",
    description: "Complete your first quiz",
    icon: "ðŸŽ¯",
    category: "learning",
    rarity: "COMMON",
    points: 10,
    requirementType: "quiz_count",
    requirementValue: 1,
    isHidden: false,
  },
  {
    key: "FIRST_CHALLENGE",
    title: "Code Newbie ðŸ’»",
    description: "Solve your first coding challenge",
    icon: "ðŸ’»",
    category: "challenge",
    rarity: "COMMON",
    points: 15,
    requirementType: "challenge_count",
    requirementValue: 1,
    isHidden: false,
  },

  // Learning Achievements
  {
    key: "QUIZ_MASTER_10",
    title: "Quiz Explorer ðŸ§ ",
    description: "Complete 10 quizzes",
    icon: "ðŸ§ ",
    category: "learning",
    rarity: "RARE",
    points: 50,
    requirementType: "quiz_count",
    requirementValue: 10,
    isHidden: false,
  },
  {
    key: "QUIZ_MASTER_25",
    title: "Quiz Master ðŸ‘‘",
    description: "Complete 25 quizzes",
    icon: "ðŸ‘‘",
    category: "learning",
    rarity: "EPIC",
    points: 100,
    requirementType: "quiz_count",
    requirementValue: 25,
    isHidden: false,
  },
  {
    key: "PERFECT_SCORE",
    title: "Perfectionist â­",
    description: "Score 100% on a quiz",
    icon: "â­",
    category: "learning",
    rarity: "RARE",
    points: 25,
    requirementType: "perfect_score",
    requirementValue: 1,
    isHidden: false,
  },
  {
    key: "SPEED_DEMON",
    title: "Speed Demon âš¡",
    description: "Complete a quiz in under 30 seconds",
    icon: "âš¡",
    category: "speed",
    rarity: "EPIC",
    points: 30,
    requirementType: "quiz_time",
    requirementValue: 30,
    isHidden: false,
  },

  // Challenge Achievements
  {
    key: "CHALLENGE_MASTER_5",
    title: "Code Solver ðŸ”§",
    description: "Solve 5 coding challenges",
    icon: "ðŸ”§",
    category: "challenge",
    rarity: "RARE",
    points: 40,
    requirementType: "challenge_count",
    requirementValue: 5,
    isHidden: false,
  },
  {
    key: "CHALLENGE_MASTER_15",
    title: "Algorithm Expert ðŸš€",
    description: "Solve 15 coding challenges",
    icon: "ðŸš€",
    category: "challenge",
    rarity: "EPIC",
    points: 75,
    requirementType: "challenge_count",
    requirementValue: 15,
    isHidden: false,
  },

  // Points Achievements
  {
    key: "POINTS_100",
    title: "Point Collector ðŸ’°",
    description: "Earn 100 total points",
    icon: "ðŸ’°",
    category: "points",
    rarity: "COMMON",
    points: 25,
    requirementType: "total_points",
    requirementValue: 100,
    isHidden: false,
  },
  {
    key: "POINTS_500",
    title: "Point Master ï¿½",
    description: "Earn 500 total points",
    icon: "ðŸ’Ž",
    category: "points",
    rarity: "RARE",
    points: 50,
    requirementType: "total_points",
    requirementValue: 500,
    isHidden: false,
  },
  {
    key: "POINTS_1000",
    title: "Point Legend ðŸ†",
    description: "Earn 1000 total points",
    icon: "ðŸ†",
    category: "points",
    rarity: "LEGENDARY",
    points: 100,
    requirementType: "total_points",
    requirementValue: 1000,
    isHidden: false,
  },

  // Mood-based Achievements
  {
    key: "CHILL_LEARNER",
    title: "Chill Vibes ðŸ˜Ž",
    description: "Complete 10 quizzes in Chill mode",
    icon: "ðŸ˜Ž",
    category: "mood",
    rarity: "RARE",
    points: 30,
    requirementType: "chill_quizzes",
    requirementValue: 10,
    isHidden: false,
  },
  {
    key: "FOCUSED_LEARNER",
    title: "Laser Focus ðŸŽ¯",
    description: "Complete 10 quizzes in Focused mode",
    icon: "ðŸŽ¯",
    category: "mood",
    rarity: "RARE",
    points: 30,
    requirementType: "focused_quizzes",
    requirementValue: 10,
    isHidden: false,
  },
  {
    key: "CRACKED_LEARNER",
    title: "Absolutely Cracked ðŸ”¥",
    description: "Complete 10 quizzes in Cracked mode",
    icon: "ðŸ”¥",
    category: "mood",
    rarity: "EPIC",
    points: 50,
    requirementType: "cracked_quizzes",
    requirementValue: 10,
    isHidden: false,
  },
  {
    key: "challenge_solver",
    title: "Problem Solver ðŸ”§",
    description: "Solve 25 coding challenges",
    icon: "ðŸ”§",
    category: "challenge",
    rarity: "RARE",
    points: 75,
    requirementType: "challenge_count",
    requirementValue: 25,
    isHidden: false,
  },
  {
    key: "coding_genius",
    title: "Coding Genius ðŸš€",
    description: "Solve 100 coding challenges",
    icon: "ðŸš€",
    category: "challenge",
    rarity: "LEGENDARY",
    points: 300,
    requirementType: "challenge_count",
    requirementValue: 100,
    isHidden: false,
  },

  // Speed Achievements
  {
    key: "speed_demon",
    title: "Speed Demon âš¡",
    description: "Complete a quiz in under 2 minutes",
    icon: "âš¡",
    category: "speed",
    rarity: "EPIC",
    points: 100,
    requirementType: "quiz_speed",
    requirementValue: 120, // 2 minutes in seconds
    isHidden: false,
  },
  {
    key: "lightning_fast",
    title: "Lightning Fast ðŸŒ©ï¸",
    description: "Complete a challenge in under 5 minutes",
    icon: "ðŸŒ©ï¸",
    category: "speed",
    rarity: "EPIC",
    points: 150,
    requirementType: "challenge_speed",
    requirementValue: 300, // 5 minutes in seconds
    isHidden: false,
  },

  // Streak Achievements
  {
    key: "consistent_learner",
    title: "Consistent Learner ðŸ“…",
    description: "Learn for 3 days in a row",
    icon: "ðŸ“…",
    category: "streak",
    rarity: "COMMON",
    points: 25,
    requirementType: "daily_streak",
    requirementValue: 3,
    isHidden: false,
  },
  {
    key: "dedicated_student",
    title: "Dedicated Student ðŸ“š",
    description: "Learn for 7 days in a row",
    icon: "ðŸ“š",
    category: "streak",
    rarity: "RARE",
    points: 50,
    requirementType: "daily_streak",
    requirementValue: 7,
    isHidden: false,
  },
  {
    key: "learning_machine",
    title: "Learning Machine ðŸ¤–",
    description: "Learn for 30 days in a row",
    icon: "ðŸ¤–",
    category: "streak",
    rarity: "LEGENDARY",
    points: 500,
    requirementType: "daily_streak",
    requirementValue: 30,
    isHidden: false,
  },

  // Mood-specific Achievements
  {
    key: "chill_master",
    title: "Chill Master ðŸ˜Œ",
    description: "Complete 20 activities in chill mode",
    icon: "ðŸ˜Œ",
    category: "mood",
    rarity: "RARE",
    points: 60,
    requirementType: "mood_activities",
    requirementValue: 20,
    isHidden: false,
  },
  {
    key: "rush_warrior",
    title: "Rush Warrior ðŸ”¥",
    description: "Complete 20 activities in rush mode",
    icon: "ðŸ”¥",
    category: "mood",
    rarity: "RARE",
    points: 60,
    requirementType: "mood_activities",
    requirementValue: 20,
    isHidden: false,
  },
  {
    key: "grind_champion",
    title: "Grind Champion ðŸ’ª",
    description: "Complete 20 activities in grind mode",
    icon: "ðŸ’ª",
    category: "mood",
    rarity: "RARE",
    points: 60,
    requirementType: "mood_activities",
    requirementValue: 20,
    isHidden: false,
  },

  // Social Achievements
  {
    key: "social_butterfly",
    title: "Social Butterfly ðŸ¦‹",
    description: "Add your first friend",
    icon: "ðŸ¦‹",
    category: "social",
    rarity: "COMMON",
    points: 20,
    requirementType: "friend_count",
    requirementValue: 1,
    isHidden: false,
  },
  {
    key: "popular_learner",
    title: "Popular Learner ðŸŒŸ",
    description: "Have 10 friends",
    icon: "ðŸŒŸ",
    category: "social",
    rarity: "RARE",
    points: 100,
    requirementType: "friend_count",
    requirementValue: 10,
    isHidden: false,
  },

  // Perfect Score Achievements
  {
    key: "perfectionist",
    title: "Perfectionist âœ¨",
    description: "Get 100% on a quiz",
    icon: "âœ¨",
    category: "performance",
    rarity: "RARE",
    points: 75,
    requirementType: "perfect_quiz",
    requirementValue: 1,
    isHidden: false,
  },
  {
    key: "flawless_coder",
    title: "Flawless Coder ðŸ’Ž",
    description: "Solve a challenge on first try",
    icon: "ðŸ’Ž",
    category: "performance",
    rarity: "EPIC",
    points: 125,
    requirementType: "first_try_challenge",
    requirementValue: 1,
    isHidden: false,
  },

  // Hidden/Special Achievements
  {
    key: "easter_egg_hunter",
    title: "Easter Egg Hunter ðŸ¥š",
    description: "Found a hidden easter egg",
    icon: "ðŸ¥š",
    category: "special",
    rarity: "EPIC",
    points: 200,
    requirementType: "easter_egg",
    requirementValue: 1,
    isHidden: true,
  },
  {
    key: "night_owl",
    title: "Night Owl ðŸ¦‰",
    description: "Complete activities between 11 PM and 5 AM",
    icon: "ðŸ¦‰",
    category: "special",
    rarity: "RARE",
    points: 50,
    requirementType: "night_activity",
    requirementValue: 5,
    isHidden: true,
  },

  // Import exercise achievements from separate file for easier management
  ...exerciseAchievements,
];

async function seedAchievements() {
  console.log("ðŸ† Seeding achievements...");

  for (const achievement of achievements) {
    await prisma.achievement.upsert({
      where: { key: achievement.key },
      update: achievement,
      create: achievement,
    });
    console.log(`âœ… Created achievement: ${achievement.title}`);
  }

  console.log(`ðŸŽ‰ Successfully seeded ${achievements.length} achievements!`);
}

seedAchievements()
  .catch((e) => {
    console.error("âŒ Error seeding achievements:", e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });
